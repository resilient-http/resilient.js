{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"_","Cache","this","store","Object","create","prototype","flush","key","emptyObject","get","clone","set","data","time","now","value","exists","isObj","isArr","./utils",2,"resolver","http","Client","_resilient","path","options","cb","send","post","put","del","delete","patch","head","method","args","normalizeArgs","requester","apply","emit","isFullUrlSchema","plainHttpRequest","arguments","mergeHttpOptions","noop","wrapCallback","once","finalRequestHandler","err","res","defaults","timeout","$timeout","merge","isURI","url","_httpClient","fn","called","./http","./resolver",3,"service","timeouts","servers","retry","waitBeforeRetry","discoverBeforeRetry","promiscuousErrors","omitRetryWhen","omitFallbackWhen","omitRetryOnMethods","omitFallbackOnMethods","omitRetryOnErrorCodes","omitFallbackOnErrorCodes","balancer","enable","random","roundRobin","roundRobinSize","balanceStrategy","disableWeight","weight","success","error","latency","discovery","parallel","cacheEnabled","cacheExpiration","refreshInterval","enableRefreshServers","enableSelfRefresh","forceRefreshOnStart","refreshServersInterval","refreshServers","refreshOptions","refreshPath","resilientOptions",4,"Servers","Requester","ResilientError","CONCURRENCY","ServersDiscovery","middleware","_middleware","getOptions","getServers","hasDiscoveryServers","updateServersInParallel","buf","sort","pending","counter","onServersUpdateFn","onUpdateServers","onUpdateInParallelFn","onUpdateInParallel","slice","forEach","server","index","pool","concat","updateServers","next","fetchServers","params","addTimeStamp","run","handler","total","decrement","reset","extend","qs","_time","closeAndEmptyPendingRequests","isEmptyBuffer","closePendingRequest","splice","client","xhr","readyState","closeClient","abort","filter","request","./error","./requester","./servers",5,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,1007,"status","stack","message",6,"Evaluator","strategies","add","strategy","push","eval","some",7,"IS_BROWSER","JSON_MIME","resolveModule","HttpClient","VERSION","mapResponse","body","statusCode","isJSONContent","JSON","parse","test","headers","mapOptions","mapRequestBody","defineUserAgent","getUserAgent","LIBRARY_VERSION","json","requestWrapper","lil-http",8,"Options","Resilient","CLIENT_VERSION","./client","./defaults","./options","./resilient",9,"midware","hooks","Middleware","createPool","use","middlewares","toArr","isFn","map","passArgs","register","type","hook","hooksMiddleware","in","out","mw","opts",10,"omit","getRaw","setServers","each","bind","undefined","defaultOptions","keys",11,"operation","getOperation","serversList","getServersList","requestNextServer","previousError","shift","defineRequestOptions","requestHandler","resolveRequest","sendRequest","handleMissingServers","getPreviousResponse","cachedPreviousResponse","responseObj","getFirstValue","shouldOmitRetryCycle","retryRequest","onRetry","retrier","updateDiscoveryServersAndRetry","delay","resolve","nextServer","start","requestReporter","shouldOmitFallback","reportError","isErrorResponse","memoizeResponse","report","getHttpClient","mapAndResolve","resolution","join","basePath","getTimeout","toLowerCase","arr","v","pop","_sync","unlock","DiscoveryResolver","update","shouldOmitOnErrorCode","shouldOmitOnMethod","shouldOmitWhenRules","shouldOmitFallbackOnErrorCode","shouldOmitFallbackOnMethod","methods","rules","ruleFilter","rule","matchRuleMethod","matchRuleStatusCode","matchHttpMethod","codes","indexOf","toUpperCase","m","trim","isUnavailableStatus","_failStrategies","isErrorStatus","isInvalidStatus","checkResponseStatus",12,"EventBus","Sync","cache","_client","_options","list","serversURL","urls","discoveryServers","resetScore","resetStats","latestServers","getUpdatedServers","discoverServers","discoveryOptions","serviceOptions","httpOptions","useHttpClient","restoreHttpClient","serversUpdated","updated","lastUpdate","refresh","mock","mockFn","unmock","failStrategy","addFailStrategy","defineMethodProxy","verb","./cache","./evaluator","./middleware","./resolvers/discovery","./sync","lil-event",13,"Resolver","wrapHandler","sync","hasDiscoveryServersOutdated","updateDiscoveryServers","hasValidServiceServers","updateServiceServers","getRefreshServers","getRefreshOptions","locked","enqueue","onRefreshServers","lock","dequeue","mErr","refreshDiscoveryServers","outdated","canUpdateDiscoveryServers","serversAreUpdated","interval","handleResolution","_cache","getRefreshBasePath","./discovery",14,"ServiceResolve","fetch","fetchHandler","../discovery","../error","../requester","./service",15,"isCacheEnabled","getCache","name","saveServers","refreshCache","errorHandler","resolveFromCache","resolveWithError","hasValidCache","expires","handleResponse","done","isValidResponse","defineServers","valid","parseAsJSON","../utils",16,"roundRobinSerie","size","max","rounds","ps","k","j","rs",17,"balancerOptions","Server","stats","calculateAvgLatency","balance","calculateStatsBalance","field","statsStore","createServerStats","read","createStats","write","round","number","toFixed",18,"RoundRobin","mapServers","empty","x","y","shuffle","roundRobinSort","find","isValidURI","uri","mapServer","array","Math","temp","configSize","./roundrobin","./server",19,"locks","queues","state","getSync","task","queue",20,"toStr","toString","Array","hasOwn","hasOwnProperty","Function","isArrayNative","isArray","uriRegex","Date","getTime","ctx","obj","ms","setTimeout","str","base","notEmpty","objIterator","extender","merger","target","iterator","eachArgument",21,22,"root","factory","Event","lil","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents",23,"slicer","hasBind","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","auth","withCredentials","responseType","assign","cur","setHeaders","defaultContent","setRequestHeader","getHeaders","rawHeaders","getAllResponseHeaders","split","header","isJSONResponse","getResponseHeader","encodeParams","getOwnPropertyNames","encodeURIComponent","replace","parseData","responseText","response","getStatus","buildResponse","statusText","buildErrorResponse","cleanReferences","onreadystatechange","onerror","ontimeout","isValidResponseStatus","onError","onLoad","config","ev","isCrossOrigin","match","getURL","XHRFactory","XMLHttpRequest","createClient","open","user","password","updateProgress","lengthComputable","loaded","hasContentTypeHeader","buildPayload","stringify","timeoutResolver","timeoutId","clearTimeout","progress","onprogress","requestFactory",24,"calls","toArray","runNext","end","remove","nargs"],"mappings":"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"}